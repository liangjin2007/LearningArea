## RayTracingGems_v1.4
```
PART I: Ray Tracing Basics ��������������������������������������������������������������� 5
Chapter 1: Ray Tracing Terminology���������������������������������������������������������� 7
1.1 Historical Notes ......................................................................................7
1.2 Definitions ...............................................................................................8
Chapter 2: What is a Ray? ������������������������������������������������������������������������ 15
2.1 Mathematical Description of a Ray .......................................................15
2.2 Ray Intervals..........................................................................................17
2.3 Rays in DXR ...........................................................................................18
2.4 Conclusion .............................................................................................19
Chapter 3: Introduction to DirectX Raytracing ����������������������������������������� 21
3.1 Introduction ...........................................................................................21
3.2 Overview ................................................................................................21
3.3 Getting Started ......................................................................................22
3.4 The DirectX Raytracing Pipeline ...........................................................23
3.5 New HLSL Support for DirectX Raytracing ...........................................25
3.6 A Simple HLSL Ray Tracing Example ...................................................28
3.7 Overview of Host Initialization for DirectX Raytracing ..........................30
3.8 Basic DXR Initialization and Setup ........................................................31
 3.9 Ray Tracing Pipeline State Objects .....................................................37
3.10 Shader Tables ......................................................................................41
3.11 Dispatching Rays .................................................................................43
3.12 Digging Deeper and Additional Resources .........................................44
3.13 Conclusion ...........................................................................................45
Chapter 4: A Planetarium Dome Master Camera������������������������������������� 49
4.1 Introduction ...........................................................................................49
4.2 Methods .................................................................................................50
4.3 Planetarium Dome Master Projection Sample Code ...........................58
Chapter 5: Computing Minima and Maxima of Subarrays ������������������������ 61
5.1 Motivation ..............................................................................................61
5.2 Naive Full Table Lookup ........................................................................62
5.3 The Sparse Table Method ......................................................................62
5.4 The (Recursive) Range Tree Method .....................................................64
5.5 Iterative Range Tree Queries ................................................................66
5.6 Results ..................................................................................................69
5.7 Summary ...............................................................................................69
PART II: Intersections and Efficiency ���������������������������������������������� 75
Chapter 6: A Fast and Robust Method for Avoiding Self-Intersection ������ 77
6.1 Introduction ...........................................................................................77
6.2 Method ...................................................................................................78
6.3 Conclusion .............................................................................................84
Chapter 7: Precision Improvements for Ray/Sphere Intersection ���������� 87
7.1 Basic Ray/Sphere Intersection .............................................................87
7.2 Floating-Point Precision Considerations ..............................................89
7.3 Related Resources ................................................................................93
Chapter 8: Cool Patches: A Geometric Approach to 
Ray/Bilinear Patch Intersections������������������������������������������������������������� 95
8.1 Introduction and Prior Art .....................................................................95
8.2 GARP Details .......................................................................................100
8.3 Discussion of Results ..........................................................................102
8.4 Code.....................................................................................................105
Chapter 9: Multi-Hit Ray Tracing in DXR ������������������������������������������������ 111
9.1 Introduction .........................................................................................111
9.2 Implementation ...................................................................................113
9.3 Results ................................................................................................119
9.4 Conclusions .........................................................................................124
Chapter 10: A Simple Load-Balancing Scheme with 
High Scaling Efficiency �������������������������������������������������������������������������� 127
10.1 Introduction .......................................................................................127
10.2 Requirements ....................................................................................128
10.3 Load Balancing..................................................................................128
10.4 Results ..............................................................................................132
PART III: Reflections, Refractions, and Shadows �������������������������� 137
Chapter 11: Automatic Handling of Materials in Nested Volumes���������� 139
11.1 Modeling Volumes .............................................................................139
11.2 Algorithm ..........................................................................................142
11.3 Limitations ........................................................................................146
Chapter 12: A Microfacet-Based Shadowing Function to 
Solve the Bump Terminator Problem����������������������������������������������������� 149
12.1 Introduction .......................................................................................149
12.2 Previous Work ...................................................................................150
12.3 Method ...............................................................................................151
12.4 Results ..............................................................................................157
Chapter 13: Ray Traced Shadows: Maintaining Real-Time 
Frame Rates ������������������������������������������������������������������������������������������ 159
13.1 Introduction .......................................................................................159
13.2 Related Work .....................................................................................161
13.3 Ray Traced Shadows .........................................................................162
13.4 Adaptive Sampling ............................................................................164
13.5 Implementation .................................................................................171
13.6 Results ..............................................................................................175
13.7 Conclusion and Future Work ............................................................179
Chapter 14: Ray-Guided Volumetric Water Caustics in 
Single Scattering Media with DXR���������������������������������������������������������� 183
14.1 Introduction .......................................................................................183
14.2 Volumetric Lighting and Refracted Light ..........................................186
14.3 Algorithm ..........................................................................................189
14.4 Implementation Details.....................................................................197
14.5 Results ..............................................................................................198
14.6 Future Work .......................................................................................200
14.7 Demo .................................................................................................200
PART IV: Sampling ������������������������������������������������������������������������ 205
Chapter 15: On the Importance of Sampling ������������������������������������������ 207
15.1 Introduction .......................................................................................207
15.2 Example: Ambient Occlusion ............................................................208
15.3 Understanding Variance ....................................................................213
15.4 Direct Illumination ............................................................................216
15.5 Conclusion .........................................................................................221
Chapter 16: Sampling Transformations Zoo ������������������������������������������ 223
16.1 The Mechanics of Sampling ..............................................................223
16.2 Introduction to Distributions .............................................................224
16.3 One-Dimensional Distributions ........................................................226
16.4 Two-Dimensional Distributions ........................................................230
16.5 Uniformly Sampling Surfaces ...........................................................234
16.6 Sampling Directions ..........................................................................239
16.7 Volume Scattering .............................................................................243
16.8 Adding to the Zoo Collection .............................................................244
Chapter 17: Ignoring the Inconvenient When Tracing Rays�������������������� 247
17.1 Introduction .......................................................................................247
17.2 Motivation ..........................................................................................247
17.3 Clamping ...........................................................................................250
17.4 Path Regularization...........................................................................251
17.5 Conclusion .........................................................................................252
Chapter 18: Importance Sampling of Many Lights on the GPU��������������� 255
18.1 Introduction .......................................................................................255
18.2 Review of Previous Algorithms .........................................................257
18.3 Foundations .......................................................................................259
18.4 Algorithm ..........................................................................................265
18.5 Results ..............................................................................................271
18.6 Conclusion .........................................................................................280
PART V: Denoising and Filtering ��������������������������������������������������� 287
Chapter 19: Cinematic Rendering in UE4 with Real-Time 
Ray Tracing and Denoising��������������������������������������������������������������������� 289
19.1 Introduction .......................................................................................289
19.2 Integrating Ray Tracing in Unreal Engine 4 ......................................290
19.3 Real-Time Ray Tracing and Denoising .............................................300
19.4 Conclusions .......................................................................................317
Chapter 20: Texture Level of Detail Strategies for 
Real-Time Ray Tracing �������������������������������������������������������������������������� 321
20.1 Introduction .......................................................................................321
20.2 Background .......................................................................................323
20.3 Texture Level of Detail Algorithms ...................................................324
20.4 Implementation .................................................................................336
20.5 Comparison and Results ...................................................................338
20.6 Code ...................................................................................................342
Chapter 21: Simple Environment Map Filtering Using 
Ray Cones and Ray Differentials������������������������������������������������������������ 347
21.1 Introduction .......................................................................................347
21.2 Ray Cones ..........................................................................................348
21.3 Ray Differentials ................................................................................349
21.4 Results ..............................................................................................349
Chapter 22: Improving Temporal Antialiasing with 
Adaptive Ray Tracing ����������������������������������������������������������������������������� 353
22.1 Introduction .......................................................................................353
22.2 Previous Temporal Antialiasing ........................................................355
22.3 A New Algorithm ...............................................................................356
22.4 Early Results .....................................................................................363
22.5 Limitations ........................................................................................366
22.6 The Future of Real-Time Ray Traced Antialiasing ............................367
22.7 Conclusion .........................................................................................368
PART VI: Hybrid Approaches and Systems������������������������������������ 375
Chapter 23: Interactive Light Map and Irradiance Volume 
Preview in Frostbite������������������������������������������������������������������������������� 377
23.1 Introduction .......................................................................................377
23.2 GI Solver Pipeline ..............................................................................378
23.3 Acceleration Techniques ...................................................................393
23.4 Live Update ........................................................................................398
23.5 Performance and Hardware ..............................................................400
23.6 Conclusion .........................................................................................405
Chapter 24: Real-Time Global Illumination with Photon Mapping ��������� 409
24.1 Introduction .......................................................................................409
24.2 Photon Tracing ..................................................................................411
24.3 Screen-Space Irradiance Estimation ................................................418
24.4 Filtering .............................................................................................425
24.5 Results ..............................................................................................430
24.6 Future Work .......................................................................................434
Chapter 25: Hybrid Rendering for Real-Time Ray Tracing��������������������� 437
25.1 Hybrid Rendering Pipeline Overview ................................................437
25.2 Pipeline Breakdown ..........................................................................439
25.3 Performance .....................................................................................468
25.4 Future ................................................................................................469
25.5 Code ...................................................................................................469
Chapter 26: Deferred Hybrid Path Tracing��������������������������������������������� 475
26.1 Overview ............................................................................................475
26.2 Hybrid Approach ................................................................................476
26.3 BVH Traversal ....................................................................................478
26.4 Diffuse Light Transport .....................................................................481
26.5 Specular Light Transport ..................................................................485
26.6 Transparency .....................................................................................487
26.7 Performance .....................................................................................488
Chapter 27: Interactive Ray Tracing Techniques for 
High-Fidelity Scientific Visualization����������������������������������������������������� 493
27.1 Introduction .......................................................................................493
27.2 Challenges Associated with Ray Tracing Large Scenes ...................494
27.3 Visualization Methods .......................................................................500
27.4 Closing Thoughts ..............................................................................512
PART VII: Global Illumination�������������������������������������������������������� 519
Chapter 28: Ray Tracing Inhomogeneous Volumes�������������������������������� 521
28.1 Light Transport in Volumes ...............................................................521
28.2 Woodcock Tracking ...........................................................................522
28.3 Example: A Simple Volume Path Tracer ...........................................524
28.4 Further Reading ................................................................................530
Chapter 29: Efficient Particle Volume Splatting in a Ray Tracer ������������ 533
29.1 Motivation ..........................................................................................533
29.2 Algorithm ..........................................................................................534
29.3 Implementation .................................................................................535
29.4 Results ..............................................................................................539
29.5 Summary ...........................................................................................539
Chapter 30: Caustics Using Screen-Space Photon Mapping������������������� 543
30.1 Introduction .......................................................................................543
30.2 Overview ............................................................................................544
30.3 Implementation .................................................................................545
30.4 Results ..............................................................................................552
30.5 Code ...................................................................................................553
Chapter 31: Variance Reduction via Footprint Estimation in 
the Presence of Path Reuse������������������������������������������������������������������� 557
31.1 Introduction .......................................................................................557
31.2 Why Assuming Full Reuse Causes a Broken MIS Weight ................559
31.3 The Effective Reuse Factor ...............................................................560
31.4 Implementation Impacts ...................................................................565
31.5 Results ..............................................................................................566
Chapter 32: Accurate Real-Time Specular Reflections with 
Radiance Caching����������������������������������������������������������������������������������� 571
32.1 Introduction .......................................................................................571
32.2 Previous Work ...................................................................................573
32.3 Algorithm ..........................................................................................575
32.4 Spatiotemporal Filtering ...................................................................587
32.5 Results ..............................................................................................598
32.6 Conclusion .........................................................................................604
32.7 Future Work .......................................................................................605
```

## Realtime Rendering 4th Edition
```
1 Introduction 1
1.1 Contents Overview . . . . . . . . . . . . . . . . . . . . . . . . . . . 3
1.2 Notation and Definitions . . . . . . . . . . . . . . . . . . . . . . . . 5
2 The Graphics Rendering Pipeline 11
2.1 Architecture . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 12
2.2 The Application Stage . . . . . . . . . . . . . . . . . . . . . . . . . 13
2.3 Geometry Processing . . . . . . . . . . . . . . . . . . . . . . . . . . 14
2.4 Rasterization . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21
2.5 Pixel Processing . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 22
2.6 Through the Pipeline . . . . . . . . . . . . . . . . . . . . . . . . . . 25
3 The Graphics Processing Unit 29
3.1 Data-Parallel Architectures . . . . . . . . . . . . . . . . . . . . . . 30
3.2 GPU Pipeline Overview . . . . . . . . . . . . . . . . . . . . . . . . 34
3.3 The Programmable Shader Stage . . . . . . . . . . . . . . . . . . . 35
3.4 The Evolution of Programmable Shading and APIs . . . . . . . . . 37
3.5 The Vertex Shader . . . . . . . . . . . . . . . . . . . . . . . . . . . 42
3.6 The Tessellation Stage . . . . . . . . . . . . . . . . . . . . . . . . . 44
3.7 The Geometry Shader . . . . . . . . . . . . . . . . . . . . . . . . . 47
3.8 The Pixel Shader . . . . . . . . . . . . . . . . . . . . . . . . . . . . 49
3.9 The Merging Stage . . . . . . . . . . . . . . . . . . . . . . . . . . . 53
3.10 The Compute Shader . . . . . . . . . . . . . . . . . . . . . . . . . . 54
4 Transforms 57
4.1 Basic Transforms . . . . . . . . . . . . . . . . . . . . . . . . . . . . 58
4.2 Special Matrix Transforms and Operations . . . . . . . . . . . . . . 70
4.3 Quaternions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 76
4.4 Vertex Blending . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 84
4.5 Morphing . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 87
4.6 Geometry Cache Playback . . . . . . . . . . . . . . . . . . . . . . . 92
4.7 Projections . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 92
5 Shading Basics 103
5.1 Shading Models . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 103
5.2 Light Sources . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 106
5.3 Implementing Shading Models . . . . . . . . . . . . . . . . . . . . . 117
5.4 Aliasing and Antialiasing . . . . . . . . . . . . . . . . . . . . . . . . 130
5.5 Transparency, Alpha, and Compositing . . . . . . . . . . . . . . . . 148
5.6 Display Encoding . . . . . . . . . . . . . . . . . . . . . . . . . . . . 160
6 Texturing 167
6.1 The Texturing Pipeline . . . . . . . . . . . . . . . . . . . . . . . . . 169
6.2 Image Texturing . . . . . . . . . . . . . . . . . . . . . . . . . . . . 176
6.3 Procedural Texturing . . . . . . . . . . . . . . . . . . . . . . . . . . 198
6.4 Texture Animation . . . . . . . . . . . . . . . . . . . . . . . . . . . 200
6.5 Material Mapping . . . . . . . . . . . . . . . . . . . . . . . . . . . . 201
6.6 Alpha Mapping . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 202
6.7 Bump Mapping . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 208
6.8 Parallax Mapping . . . . . . . . . . . . . . . . . . . . . . . . . . . . 214
6.9 Textured Lights . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 221
7 Shadows 223
7.1 Planar Shadows . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 225
7.2 Shadows on Curved Surfaces . . . . . . . . . . . . . . . . . . . . . . 229
7.3 Shadow Volumes . . . . . . . . . . . . . . . . . . . . . . . . . . . . 230
7.4 Shadow Maps . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 234
7.5 Percentage-Closer Filtering . . . . . . . . . . . . . . . . . . . . . . 247
7.6 Percentage-Closer Soft Shadows . . . . . . . . . . . . . . . . . . . . 250
7.7 Filtered Shadow Maps . . . . . . . . . . . . . . . . . . . . . . . . . 252
7.8 Volumetric Shadow Techniques . . . . . . . . . . . . . . . . . . . . 257
7.9 Irregular Z-Buffer Shadows . . . . . . . . . . . . . . . . . . . . . . 259
7.10 Other Applications . . . . . . . . . . . . . . . . . . . . . . . . . . . 262
8 Light and Color 267
8.1 Light Quantities . . . . . . . . . . . . . . . . . . . . . . . . . . . . 267
8.2 Scene to Screen . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 281
9 Physically Based Shading 293
9.1 Physics of Light . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 293
9.2 The Camera . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 307
9.3 The BRDF . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 308
9.4 Illumination . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 315
9.5 Fresnel Reflectance . . . . . . . . . . . . . . . . . . . . . . . . . . . 316
9.6 Microgeometry . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 327
9.7 Microfacet Theory . . . . . . . . . . . . . . . . . . . . . . . . . . . 331
9.8 BRDF Models for Surface Reflection . . . . . . . . . . . . . . . . . 336
9.9 BRDF Models for Subsurface Scattering . . . . . . . . . . . . . . . 347
9.10 BRDF Models for Cloth . . . . . . . . . . . . . . . . . . . . . . . . 356
9.11 Wave Optics BRDF Models . . . . . . . . . . . . . . . . . . . . . . 359
9.12 Layered Materials . . . . . . . . . . . . . . . . . . . . . . . . . . . . 363
9.13 Blending and Filtering Materials . . . . . . . . . . . . . . . . . . . 365
10 Local Illumination 375
10.1 Area Light Sources . . . . . . . . . . . . . . . . . . . . . . . . . . . 377
10.2 Environment Lighting . . . . . . . . . . . . . . . . . . . . . . . . . 391
10.3 Spherical and Hemispherical Functions . . . . . . . . . . . . . . . . 392
10.4 Environment Mapping . . . . . . . . . . . . . . . . . . . . . . . . . 404
10.5 Specular Image-Based Lighting . . . . . . . . . . . . . . . . . . . . 414
10.6 Irradiance Environment Mapping . . . . . . . . . . . . . . . . . . . 424
10.7 Sources of Error . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 433
11 Global Illumination 437
11.1 The Rendering Equation . . . . . . . . . . . . . . . . . . . . . . . . 437
11.2 General Global Illumination . . . . . . . . . . . . . . . . . . . . . . 441
11.3 Ambient Occlusion . . . . . . . . . . . . . . . . . . . . . . . . . . . 446
11.4 Directional Occlusion . . . . . . . . . . . . . . . . . . . . . . . . . . 465
11.5 Diffuse Global Illumination . . . . . . . . . . . . . . . . . . . . . . 472
11.6 Specular Global Illumination . . . . . . . . . . . . . . . . . . . . . 497
11.7 Unified Approaches . . . . . . . . . . . . . . . . . . . . . . . . . . . 509
12 Image-Space Effects 513
12.1 Image Processing . . . . . . . . . . . . . . . . . . . . . . . . . . . . 513
12.2 Reprojection Techniques . . . . . . . . . . . . . . . . . . . . . . . . 522
12.3 Lens Flare and Bloom . . . . . . . . . . . . . . . . . . . . . . . . . 524
12.4 Depth of Field . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 527
12.5 Motion Blur . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 536
13 Beyond Polygons 545
13.1 The Rendering Spectrum . . . . . . . . . . . . . . . . . . . . . . . . 545
13.2 Fixed-View Effects . . . . . . . . . . . . . . . . . . . . . . . . . . . 546
13.3 Skyboxes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 547
13.4 Light Field Rendering . . . . . . . . . . . . . . . . . . . . . . . . . 549
13.5 Sprites and Layers . . . . . . . . . . . . . . . . . . . . . . . . . . . 550
13.6 Billboarding . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 551
13.7 Displacement Techniques . . . . . . . . . . . . . . . . . . . . . . . . 564
13.8 Particle Systems . . . . . . . . . . . . . . . . . . . . . . . . . . . . 567
13.9 Point Rendering . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 572
13.10 Voxels . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 578
14 Volumetric and Translucency Rendering 589
14.1 Light Scattering Theory . . . . . . . . . . . . . . . . . . . . . . . . 589
14.2 Specialized Volumetric Rendering . . . . . . . . . . . . . . . . . . . 600
14.3 General Volumetric Rendering . . . . . . . . . . . . . . . . . . . . . 605
14.4 Sky Rendering . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 613
14.5 Translucent Surfaces . . . . . . . . . . . . . . . . . . . . . . . . . . 623
14.6 Subsurface Scattering . . . . . . . . . . . . . . . . . . . . . . . . . . 632
14.7 Hair and Fur . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 640
14.8 Unified Approaches . . . . . . . . . . . . . . . . . . . . . . . . . . . 648
15 Non-Photorealistic Rendering 651
15.1 Toon Shading . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 652
15.2 Outline Rendering . . . . . . . . . . . . . . . . . . . . . . . . . . . 654
15.3 Stroke Surface Stylization . . . . . . . . . . . . . . . . . . . . . . . 669
15.4 Lines . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 673
15.5 Text Rendering . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 675
16 Polygonal Techniques 681
16.1 Sources of Three-Dimensional Data . . . . . . . . . . . . . . . . . . 682
16.2 Tessellation and Triangulation . . . . . . . . . . . . . . . . . . . . . 683
16.3 Consolidation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 690
16.4 Triangle Fans, Strips, and Meshes . . . . . . . . . . . . . . . . . . . 696
16.5 Simplification . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 706
16.6 Compression and Precision . . . . . . . . . . . . . . . . . . . . . . . 712
17 Curves and Curved Surfaces 717
17.1 Parametric Curves . . . . . . . . . . . . . . . . . . . . . . . . . . . 718
17.2 Parametric Curved Surfaces . . . . . . . . . . . . . . . . . . . . . . 734
17.3 Implicit Surfaces . . . . . . . . . . . . . . . . . . . . . . . . . . . . 749
17.4 Subdivision Curves . . . . . . . . . . . . . . . . . . . . . . . . . . . 753
17.5 Subdivision Surfaces . . . . . . . . . . . . . . . . . . . . . . . . . . 756
17.6 Efficient Tessellation . . . . . . . . . . . . . . . . . . . . . . . . . . 767
18 Pipeline Optimization 783
18.1 Profiling and Debugging Tools . . . . . . . . . . . . . . . . . . . . . 784
18.2 Locating the Bottleneck . . . . . . . . . . . . . . . . . . . . . . . . 786
18.3 Performance Measurements . . . . . . . . . . . . . . . . . . . . . . 788
18.4 Optimization . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 790
18.5 Multiprocessing . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 805
19 Acceleration Algorithms 817
19.1 Spatial Data Structures . . . . . . . . . . . . . . . . . . . . . . . . 818
19.2 Culling Techniques . . . . . . . . . . . . . . . . . . . . . . . . . . . 830
19.3 Backface Culling . . . . . . . . . . . . . . . . . . . . . . . . . . . . 831
19.4 View Frustum Culling . . . . . . . . . . . . . . . . . . . . . . . . . 835
19.5 Portal Culling . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 837
19.6 Detail and Small Triangle Culling . . . . . . . . . . . . . . . . . . . 839
19.7 Occlusion Culling . . . . . . . . . . . . . . . . . . . . . . . . . . . . 840
19.8 Culling Systems . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 850
19.9 Level of Detail . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 852
19.10 Rendering Large Scenes . . . . . . . . . . . . . . . . . . . . . . . . 866
20 Efficient Shading 881
20.1 Deferred Shading . . . . . . . . . . . . . . . . . . . . . . . . . . . . 883
20.2 Decal Rendering . . . . . . . . . . . . . . . . . . . . . . . . . . . . 888
20.3 Tiled Shading . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 892
20.4 Clustered Shading . . . . . . . . . . . . . . . . . . . . . . . . . . . 898
20.5 Deferred Texturing . . . . . . . . . . . . . . . . . . . . . . . . . . . 905
20.6 Object- and Texture-Space Shading . . . . . . . . . . . . . . . . . . 908
21 Virtual and Augmented Reality 915
21.1 Equipment and Systems Overview . . . . . . . . . . . . . . . . . . 916
21.2 Physical Elements . . . . . . . . . . . . . . . . . . . . . . . . . . . 919
21.3 APIs and Hardware . . . . . . . . . . . . . . . . . . . . . . . . . . . 924
21.4 Rendering Techniques . . . . . . . . . . . . . . . . . . . . . . . . . 932
22 Intersection Test Methods 941
22.1 GPU-Accelerated Picking . . . . . . . . . . . . . . . . . . . . . . . 942
22.2 Definitions and Tools . . . . . . . . . . . . . . . . . . . . . . . . . . 943
22.3 Bounding Volume Creation . . . . . . . . . . . . . . . . . . . . . . 948
22.4 Geometric Probability . . . . . . . . . . . . . . . . . . . . . . . . . 953
22.5 Rules of Thumb . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 954
22.6 Ray/Sphere Intersection . . . . . . . . . . . . . . . . . . . . . . . . 955
22.7 Ray/Box Intersection . . . . . . . . . . . . . . . . . . . . . . . . . . 959
22.8 Ray/Triangle Intersection . . . . . . . . . . . . . . . . . . . . . . . 962
22.9 Ray/Polygon Intersection . . . . . . . . . . . . . . . . . . . . . . . 966
22.10 Plane/Box Intersection . . . . . . . . . . . . . . . . . . . . . . . . . 970
22.11 Triangle/Triangle Intersection . . . . . . . . . . . . . . . . . . . . . 972
22.12 Triangle/Box Intersection . . . . . . . . . . . . . . . . . . . . . . . 974
22.13 Bounding-Volume/Bounding-Volume Intersection . . . . . . . . . . 976
22.14 View Frustum Intersection . . . . . . . . . . . . . . . . . . . . . . . 981
22.15 Line/Line Intersection . . . . . . . . . . . . . . . . . . . . . . . . . 987
22.16 Intersection between Three Planes . . . . . . . . . . . . . . . . . . 990
23 Graphics Hardware 993
23.1 Rasterization . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 993
23.2 Massive Compute and Scheduling . . . . . . . . . . . . . . . . . . . 1002
23.3 Latency and Occupancy . . . . . . . . . . . . . . . . . . . . . . . . 1004
23.4 Memory Architecture and Buses . . . . . . . . . . . . . . . . . . . 1006
23.5 Caching and Compression . . . . . . . . . . . . . . . . . . . . . . . 1007
23.6 Color Buffering . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1009
23.7 Depth Culling, Testing, and Buffering . . . . . . . . . . . . . . . . 1014
23.8 Texturing . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1017
23.9 Architecture . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1019
23.10 Case Studies . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1024
23.11 Ray Tracing Architectures . . . . . . . . . . . . . . . . . . . . . . . 1039
24 The Future 1041
24.1 Everything Else . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1042
24.2 You . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1046
```

## Fluid Simulation for Computer Graphics, Second Edition
```
 The Basics 1
1 The Equations of Fluids 3
1.1 Symbols . . . . . . . . . . . . . . . . . . . . . . . . . . . . 3
1.2 The Momentum Equation . . . . . . . . . . . . . . . . . . 4
1.3 Lagrangian and Eulerian Viewpoints . . . . . . . . . . . . 7
1.4 Incompressibility . . . . . . . . . . . . . . . . . . . . . . . 11
1.5 Dropping Viscosity . . . . . . . . . . . . . . . . . . . . . . 13
1.6 Boundary Conditions . . . . . . . . . . . . . . . . . . . . . 13
2 Overview of Numerical Simulation 17
2.1 Splitting . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17
2.2 Splitting the Fluid Equations . . . . . . . . . . . . . . . . 19
2.3 Time Steps . . . . . . . . . . . . . . . . . . . . . . . . . . 20
2.4 Grids . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21
2.5 Dynamic Sparse Grids . . . . . . . . . . . . . . . . . . . . 25
2.6 Two Dimensional Simulations . . . . . . . . . . . . . . . . 27
3 Advection Algorithms 29
3.1 Semi-Lagrangian Advection . . . . . . . . . . . . . . . . . 29
3.2 Boundary Conditions . . . . . . . . . . . . . . . . . . . . . 33
3.3 Time Step Size . . . . . . . . . . . . . . . . . . . . . . . . 34
3.4 Diffusion . . . . . . . . . . . . . . . . . . . . . . . . . . . . 37
3.5 Reducing Numerical Diffusion . . . . . . . . . . . . . . . . 39
4 Level Set Geometry 43
4.1 Signed Distance . . . . . . . . . . . . . . . . . . . . . . . . 44
4.2 Discretizing Signed Distance Functions . . . . . . . . . . . 47
4.3 Computing Signed Distance . . . . . . . . . . . . . . . . . 49
4.4 Recomputing Signed Distance . . . . . . . . . . . . . . . . 54
4.5 Operations on Level Sets . . . . . . . . . . . . . . . . . . . 55
4.6 Contouring . . . . . . . . . . . . . . . . . . . . . . . . . . 59
4.7 Limitations of Level Sets . . . . . . . . . . . . . . . . . . . 64
4.8 Extrapolating Data . . . . . . . . . . . . . . . . . . . . . . 64
5 Making Fluids Incompressible 67
5.1 The Discrete Pressure Gradient . . . . . . . . . . . . . . . 68
5.2 The Discrete Divergence . . . . . . . . . . . . . . . . . . . 72
5.3 The Pressure Equations . . . . . . . . . . . . . . . . . . . 74
5.4 Projection . . . . . . . . . . . . . . . . . . . . . . . . . . . 90
5.5 More Accurate Curved Boundaries . . . . . . . . . . . . . 91
5.6 The Compatibility Condition . . . . . . . . . . . . . . . . 96
6 Smoke 99
6.1 Temperature and Smoke Concentration . . . . . . . . . . 99
6.2 Buoyancy . . . . . . . . . . . . . . . . . . . . . . . . . . . 102
6.3 Variable Density Solves . . . . . . . . . . . . . . . . . . . 103
6.4 Divergence Control . . . . . . . . . . . . . . . . . . . . . . 105
7 Particle Methods 107
7.1 Advection Troubles on Grids . . . . . . . . . . . . . . . . 107
7.2 Particle Advection . . . . . . . . . . . . . . . . . . . . . . 109
7.3 Transferring Particles to the Grid . . . . . . . . . . . . . . 111
7.4 Particle Seeding . . . . . . . . . . . . . . . . . . . . . . . . 114
7.5 Diffusion . . . . . . . . . . . . . . . . . . . . . . . . . . . . 115
7.6 Particle-in-Cell Methods . . . . . . . . . . . . . . . . . . . 116
II More Types of Fluids 121
8 Water 123
8.1 Marker Particles and Voxels . . . . . . . . . . . . . . . . . 123
8.2 More Accurate Pressure Solves . . . . . . . . . . . . . . . 127
8.3 Topology Change and Wall Separation . . . . . . . . . . . 129
8.4 Volume Control . . . . . . . . . . . . . . . . . . . . . . . . 130
8.5 Surface Tension . . . . . . . . . . . . . . . . . . . . . . . . 131
9 Fire 133
9.1 Thin Flames . . . . . . . . . . . . . . . . . . . . . . . . . 134
9.2 Volumetric Combustion . . . . . . . . . . . . . . . . . . . 137
10 Viscous Fluids 139
10.1 Stress . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 139
10.2 Applying Stress . . . . . . . . . . . . . . . . . . . . . . . . 141
10.3 Strain Rate and Newtonian Fluids . . . . . . . . . . . . . 142
10.4 Boundary Conditions . . . . . . . . . . . . . . . . . . . . . 147
10.5 Implementation . . . . . . . . . . . . . . . . . . . . . . . . 148
III More Algorithms 161
11 Turbulence 163
11.1 Vorticity . . . . . . . . . . . . . . . . . . . . . . . . . . . . 163
11.2 Vorticity Confinement . . . . . . . . . . . . . . . . . . . . 167
11.3 Procedural Turbulence . . . . . . . . . . . . . . . . . . . . 168
11.4 Simulating Sub-Grid Turbulence . . . . . . . . . . . . . . 172
12 Shallow Water 175
12.1 Deriving the Shallow Water Equations . . . . . . . . . . . 176
12.2 The Wave Equation . . . . . . . . . . . . . . . . . . . . . 180
12.3 Discretization . . . . . . . . . . . . . . . . . . . . . . . . . 182
13 Ocean Modeling 185
13.1 Potential Flow . . . . . . . . . . . . . . . . . . . . . . . . 185
13.2 Simplifying Potential Flow for the Ocean . . . . . . . . . 188
13.3 Evaluating the Height Field Solution . . . . . . . . . . . . 193
13.4 Unsimplifying the Model . . . . . . . . . . . . . . . . . . . 195
13.5 Wave Parameters . . . . . . . . . . . . . . . . . . . . . . . 198
13.6 Eliminating Periodicity . . . . . . . . . . . . . . . . . . . . 199
14 Vortex Methods 201
14.1 Velocity from Vorticity . . . . . . . . . . . . . . . . . . . . 202
14.2 Biot-Savart and Streamfunctions . . . . . . . . . . . . . . 206
14.3 Vortex Particles . . . . . . . . . . . . . . . . . . . . . . . . 207
15 Coupling Fluids and Solids 217
15.1 One-Way Coupling . . . . . . . . . . . . . . . . . . . . . . 217
15.2 Weak Coupling . . . . . . . . . . . . . . . . . . . . . . . . 219
15.3 The Immersed Boundary Method . . . . . . . . . . . . . . 222
15.4 General Sparse Matrices . . . . . . . . . . . . . . . . . . . 223
15.5 Strong Coupling . . . . . . . . . . . . . . . . . . . . . . . 225
A Background 231
A.1 Vector Calculus . . . . . . . . . . . . . . . . . . . . . . . . 231
A.2 Numerical Methods . . . . . . . . . . . . . . . . . . . . . . 239
B Derivations 243
B.1 The Incompressible Euler Equations . . . . . . . . . . . . 243
```


## 3D Game Design with Unreal Engine 4 and Blender
```
Chapter 1: Unreal, My Friend, I'd Like You to Meet Blender 1
Installing Blender 2
Exploring the interface 3
Customizing your settings 6
Working with modes 8
Jumping into our first project 8
Getting things started in Unreal Engine 4 9
Summary 11
Chapter 2: Starting Our First Project 13
Using the Content Browser to start building the level 15
Using different types of light 28
Adding interactive elements using Triggers and Blueprints 31
Playtesting our level 41
Summary 42
Chapter 3: It's Time to Customize! 43
Getting started making game assets 44
Using the basic tools of polygon modeling 46
How to use UV mapping and why it's important 57
UV unwrapping our game asset 60
Basic texturing techniques 66
Summary 70
Chapter 4: Getting the Assets to the Level 71
Exporting our object from Blender 71
What is FBX? 75
Importing our object into Unreal 76
Setting up and using our new 3D asset 79
Summary 86
Chapter 5: Taking This Level Up a Notch 87
Planning a more complex level 87
Whiteboxing a level for better asset creation 89
Level design principles 93
Advanced scripting techniques 95
Win conditions 109
Summary 112
Chapter 6: Monster Assets – The Level Totally Needs 
One of These 113
Designing our asset – inspiration and concept art 114
Advanced tools: Subdivide, Knife, Bridge Edge Loops, and more 115
Subdivide tool 116
Knife tool 117
Bridge Edge Loops tool 118
Triangulate modifier tool 118
Using multiple shapes within Blender 119
Summary 143
Chapter 7: Let's Dress to Impress! 145
Unwrapping complex objects 145
Marking seams 146
Unwrap tool 147
Stitch 148
Average Island Scale 149
Pack Islands 150
Using Smart UV Project 150
Custom Marking Seams 151
Unwrapping Cubes 152
Unwrapping Cylinders 154
Using different maps to create a more realistic look 165
Summary 184
Chapter 8: Lights, Camera, Animation! 185
How does Blender handle animation? 185
Rigging and using keyframes 188
Using Blender's suite of animation tools 200
Summary 204
Chapter 9: Bang Bang – Let's Make It Explode 205
Creating a class blueprint to tie it all together 206
Using sound effects 219
Using particle effects 224
```


## Computational Geometry Algorithms and Applications
```
1 Computational Geometry 1
Introduction
1.1 An Example: Convex Hulls 2
1.2 Degeneracies and Robustness 8
1.3 Application Domains 10
1.4 Notes and Comments 13
1.5 Exercises 15
2 Line Segment Intersection 19
Thematic Map Overlay
2.1 Line Segment Intersection 20
2.2 The Doubly-Connected Edge List 29
2.3 Computing the Overlay of Two Subdivisions 33
2.4 Boolean Operations 39
2.5 Notes and Comments 40
2.6 Exercises 41
3 Polygon Triangulation 45
Guarding an Art Gallery
3.1 Guarding and Triangulations 46
3.2 Partitioning a Polygon into Monotone Pieces 49
3.3 Triangulating a Monotone Polygon 55
3.4 Notes and Comments 59
3.5 Exercises 60
4 Linear Programming 63
Manufacturing with Molds
4.1 The Geometry of Casting 64
4.2 Half-Plane Intersection 66
4.3 Incremental Linear Programming 71
4.4 Randomized Linear Programming 76
4.5 Unbounded Linear Programs 79
4.6* Linear Programming in Higher Dimensions 82
4.7* Smallest Enclosing Discs 86
4.8 Notes and Comments 89
4.9 Exercises 91
5 Orthogonal Range Searching 95
Querying a Database
5.1 1-Dimensional Range Searching 96
5.2 Kd-Trees 99
5.3 Range Trees 105
5.4 Higher-Dimensional Range Trees 109
5.5 General Sets of Points 110
5.6* Fractional Cascading 111
5.7 Notes and Comments 115
5.8 Exercises 117
6 Point Location 121
Knowing Where You Are
6.1 Point Location and Trapezoidal Maps 122
6.2 A Randomized Incremental Algorithm 128
6.3 Dealing with Degenerate Cases 137
6.4* A Tail Estimate 140
6.5 Notes and Comments 143
6.6 Exercises 144
7 Voronoi Diagrams 147
The Post Office Problem
7.1 Definition and Basic Properties 148
7.2 Computing the Voronoi Diagram 151
7.3 Voronoi Diagrams of Line Segments 160
7.4 Farthest-Point Voronoi Diagrams 163
7.5 Notes and Comments 167
7.6 Exercises 170
8 Arrangements and Duality 173
Supersampling in Ray Tracing
8.1 Computing the Discrepancy 175
8.2 Duality 177
8.3 Arrangements of Lines 179
8.4 Levels and Discrepancy 185
8.5 Notes and Comments 186
8.6 Exercises 188
9 Delaunay Triangulations 191
Height Interpolation
9.1 Triangulations of Planar Point Sets 193
9.2 The Delaunay Triangulation 196
9.3 Computing the Delaunay Triangulation 199
9.4 The Analysis 205
9.5* A Framework for Randomized Algorithms 208
9.6 Notes and Comments 214
9.7 Exercises 215
10 More Geometric Data Structures 219
Windowing
10.1 Interval Trees 220
10.2 Priority Search Trees 226
10.3 Segment Trees 231
10.4 Notes and Comments 237
10.5 Exercises 239
11 Convex Hulls 243
Mixing Things
11.1 The Complexity of Convex Hulls in 3-Space 244
11.2 Computing Convex Hulls in 3-Space 246
11.3* The Analysis 250
11.4* Convex Hulls and Half-Space Intersection 253
11.5* Voronoi Diagrams Revisited 254
11.6 Notes and Comments 256
11.7 Exercises 257
12 Binary Space Partitions 259
The Painter’s Algorithm
12.1 The Definition of BSP Trees 261
12.2 BSP Trees and the Painter’s Algorithm 263
12.3 Constructing a BSP Tree 264
12.4* The Size of BSP Trees in 3-Space 268
12.5 BSP Trees for Low-Density Scenes 271
12.6 Notes and Comments 278
12.7 Exercises 279
13 Robot Motion Planning 283
Getting Where You Want to Be
13.1 Work Space and Configuration Space 284
13.2 A Point Robot 286
13.3 Minkowski Sums 290
13.4 Translational Motion Planning 297
13.5* Motion Planning with Rotations 299
13.6 Notes and Comments 303
13.7 Exercises 305
14 Quadtrees 307
Non-Uniform Mesh Generation
14.1 Uniform and Non-Uniform Meshes 308
14.2 Quadtrees for Point Sets 309
14.3 From Quadtrees to Meshes 315
14.4 Notes and Comments 318
14.5 Exercises 320
15 Visibility Graphs 323
Finding the Shortest Route
15.1 Shortest Paths for a Point Robot 324
15.2 Computing the Visibility Graph 326
15.3 Shortest Paths for a Translating Polygonal Robot 330
15.4 Notes and Comments 331
15.5 Exercises 332
16 Simplex Range Searching 335
Windowing Revisited
16.1 Partition Trees 336
16.2 Multi-Level Partition Trees 343
16.3 Cutting Trees 346
16.4 Notes and Comments 352
16.5 Exercises 353
```


## GPU Gems 1
```
第一章 用物理模型进行高效的水模拟
第二章 水刻蚀的渲染
第三章 Dawn演示中的皮肤
第四章 Dawn演示中的动画
第五章 改良的Perlin噪声的实现
第六章 Vulcan演示中的火
第七章 无数波动草叶的渲染
第八章 衍射的模拟
第九章 有效的阴影体渲染
第十章 电影级的光照
第十一章 阴影贴图反走样 
11.2 靠近的百分比过滤
第十二章 全方位的阴影映射
第十三章 使用遮挡区间产生模拟的阴影
第十四章 透视阴影贴图
第十五章 逐像素光照的可见性管理
第十六章 次表面散射的实时近似
第十七章 环境遮挡
第十八章 空间的BRDFs
第十九章 基于图像的光照
第二十章 纹理爆炸
第二十一章 实时辉光
第二十二章 颜色控制
第二十三章 景深：技术综述
第二十四章 高质量的过滤
第二十五章 用纹理贴图进行快速过滤宽度的计算
第二十六章 OpenEXR图像文件格式
第二十七章 图像处理的框架
第二十八章 图形流水线性能
第二十九章 有效的遮挡剔除
第三十章 FX Composer的设计
第三十一章 FX Composer的使用
第三十二章 Shader接口入门
第三十三章 将产品的RenderMan Shader转成实时Shader
第三十四章 将硬件着色整合进Cinema 4D
第三十五章 在实时引用程序中用高质软件渲染效果
第三十六章 将Shader整合到应用程序中去。
第三十七章 用于GPU计算的工具箱
第三十八章 在GPU上的快速流体动力学模拟
第三十九章 体渲染技术
第四十章 用于三维超声波可视化的实时着色
第四十一章 实时立体图
第四十二章 变形
```


## GPU Gems 2
```
Part I: Geometric Complexity
o Chapter 1. Toward Photorealism in Virtual Botany
o Chapter 2. Terrain Rendering Using GPU-Based Geometry Clipmaps
o Chapter 3. Inside Geometry Instancing
o Chapter 4. Segment Buffering
o Chapter 5. Optimizing Resource Management with Multistreaming
o Chapter 6. Hardware Occlusion Queries Made Useful
o Chapter 7. Adaptive Tessellation of Subdivision Surfaces with Displacement Mapping
o Chapter 8. Per-Pixel Displacement Mapping with Distance Functions
 Part II: Shading, Lighting, and Shadows
o Chapter 9. Deferred Shading in S.T.A.L.K.E.R.
o Chapter 10. Real-Time Computation of Dynamic Irradiance Environment Maps
o Chapter 11. Approximate Bidirectional Texture Functions
o Chapter 12. Tile-Based Texture Mapping
o Chapter 13. Implementing the mental images Phenomena Renderer on the GPU
o Chapter 14. Dynamic Ambient Occlusion and Indirect Lighting
o Chapter 15. Blueprint Rendering and "Sketchy Drawings"
o Chapter 16. Accurate Atmospheric Scattering
o Chapter 17. Efficient Soft-Edged Shadows Using Pixel Shader Branching
o Chapter 18. Using Vertex Texture Displacement for Realistic Water Rendering
o Chapter 19. Generic Refraction Simulation
 Part III: High-Quality Rendering
o Chapter 20. Fast Third-Order Texture Filtering
o Chapter 21. High-Quality Antialiased Rasterization
o Chapter 22. Fast Prefiltered Lines
o Chapter 23. Hair Animation and Rendering in the Nalu Demo
o Chapter 24. Using Lookup Tables to Accelerate Color Transformations
o Chapter 25. GPU Image Processing in Apple's Motion
o Chapter 26. Implementing Improved Perlin Noise
o Chapter 27. Advanced High-Quality Filtering
o Chapter 28. Mipmap-Level Measurement
 Part IV: General-Purpose Computation on GPUS: A Primer
o Chapter 29. Streaming Architectures and Technology Trends
o Chapter 30. The GeForce 6 Series GPU Architecture
o Chapter 31. Mapping Computational Concepts to GPUs
o Chapter 32. Taking the Plunge into GPU Computing
o Chapter 33. Implementing Efficient Parallel Data Structures on GPUs
o Chapter 34. GPU Flow-Control Idioms
o Chapter 35. GPU Program Optimization
o Chapter 36. Stream Reduction Operations for GPGPU Applications
 Part V: Image-Oriented Computing
o Chapter 37. Octree Textures on the GPU
o Chapter 38. High-Quality Global Illumination Rendering Using Rasterization
o Chapter 39. Global Illumination Using Progressive Refinement Radiosity
o Chapter 40. Computer Vision on the GPU
o Chapter 41. Deferred Filtering: Rendering from Difficult Data Formats
o Chapter 42. Conservative Rasterization
 Part VI: Simulation and Numerical Algorithms
o Chapter 43. GPU Computing for Protein Structure Prediction
o Chapter 44. A GPU Framework for Solving Systems of Linear Equations
o Chapter 45. Options Pricing on the GPU
o Chapter 46. Improved GPU Sorting
o Chapter 47. Flow Simulation with Complex Boundaries
o Chapter 48. Medical Image Reconstruction with the FFT
```
